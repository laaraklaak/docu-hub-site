<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Docu-Hub | Luxury Concierge & Compliance</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: '#003366',
                        gold: '#D4AF37',
                        emerald: '#059669',
                        paper: '#F5F0EC',
                        glass: 'rgba(255, 255, 255, 0.95)'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,600;0,700;1,600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* LUXURY TACTILE UI */
        body { background-color: #F5F0EC; color: #003366; -webkit-font-smoothing: antialiased; }
        
        .btn-primary {
            background: #003366; color: white; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #003366; position: relative; overflow: hidden;
        }
        .btn-primary:active { transform: scale(0.95); }
        .btn-primary:hover { background: #D4AF37; border-color: #D4AF37; color: #003366; }
        .btn-disabled { background: #9ca3af; cursor: not-allowed; opacity: 0.5; transform: none !important; }

        .card-interaction {
            transition: all 0.4s ease; border: 1px solid rgba(0,0,0,0.05);
        }
        .card-interaction:hover {
            transform: translateY(-4px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border-color: #D4AF37;
        }
        .card-active {
            border: 2px solid #D4AF37; background: white; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        /* SCROLL TRAP STYLING */
        .scroll-trap {
            scrollbar-width: thin; scrollbar-color: #D4AF37 #f1f1f1;
        }
        .scroll-trap::-webkit-scrollbar { width: 6px; }
        .scroll-trap::-webkit-scrollbar-track { background: #f1f1f1; }
        .scroll-trap::-webkit-scrollbar-thumb { background-color: #D4AF37; border-radius: 20px; }

        /* SENSORY OVERLAY */
        .sensory-overlay {
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
        }
        
        .fade-enter { opacity: 0; transform: translateY(20px); }
        .fade-enter-active { opacity: 1; transform: translateY(0); transition: opacity 0.5s, transform 0.5s; }
        
        canvas { background: #fff; border: 1px dashed #cbd5e1; border-radius: 0.5rem; cursor: crosshair; }
    </style>
</head>
<body class="pb-24">

    <nav class="sticky top-0 z-40 bg-navy/95 backdrop-blur text-white border-b border-gold/30">
        <div class="max-w-4xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <i data-lucide="shield-check" class="text-gold" size="24"></i>
                <div>
                    <h1 class="font-serif font-bold text-lg tracking-widest uppercase">Docu-Hub</h1>
                    <p class="text-[9px] uppercase tracking-[0.2em] text-gold">Operations Services</p>
                </div>
            </div>
            <div class="text-[10px] font-mono text-gold border border-gold px-2 py-1 rounded">
                SECURE: AES-256
            </div>
        </div>
    </nav>

    <header class="relative h-[280px] w-full overflow-hidden flex items-center justify-center bg-navy">
        <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?auto=format&fit=crop&q=80&w=1000" class="absolute inset-0 w-full h-full object-cover opacity-40 mix-blend-overlay">
        <div class="relative z-10 text-center space-y-4 px-4">
            <span class="inline-block px-3 py-1 bg-gold/20 text-gold border border-gold rounded-full text-[10px] font-bold uppercase tracking-widest backdrop-blur-sm">
                Editorial Mission Hub
            </span>
            <h2 class="font-serif text-4xl md:text-5xl text-white italic">The Compliance Concierge</h2>
            <p class="text-white/80 text-sm max-w-md mx-auto font-light">Precision logistics for Jamaica's most demanding protocols.</p>
        </div>
    </header>

    <main class="max-w-3xl mx-auto px-6 -mt-10 relative z-20 space-y-16">

        <section id="leg-1" class="fade-enter-active">
            <div class="flex items-baseline gap-4 mb-6 border-b border-navy/10 pb-4">
                <span class="font-serif text-4xl text-navy/20 italic">01</span>
                <h3 class="text-xl font-bold text-navy uppercase tracking-wide">Select Service Suite</h3>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div id="service-grid" class="contents"></div>
            </div>
        </section>

        <section id="leg-2" class="hidden opacity-50 transition-all duration-500">
            <div class="flex items-baseline gap-4 mb-6 border-b border-navy/10 pb-4">
                <span class="font-serif text-4xl text-navy/20 italic">02</span>
                <h3 class="text-xl font-bold text-navy uppercase tracking-wide">Requirements Audit</h3>
            </div>
            <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-emerald">
                <div class="flex items-start gap-4 mb-6">
                    <div class="bg-emerald/10 p-3 rounded-full text-emerald">
                        <i data-lucide="clipboard-list" size="24"></i>
                    </div>
                    <div>
                        <h4 class="font-bold text-navy text-lg">Physical Document Check</h4>
                        <p class="text-xs text-gray-500 mt-1">Please confirm possession of the following before proceeding.</p>
                    </div>
                </div>
                <div id="checklist-container" class="space-y-3 mb-8"></div>
                <button onclick="confirmAudit()" class="btn-primary w-full py-4 rounded font-bold uppercase text-xs tracking-widest">
                    Confirm Possession & Proceed
                </button>
            </div>
        </section>

        <section id="leg-3" class="hidden opacity-50 transition-all duration-500">
            <div class="flex items-baseline gap-4 mb-6 border-b border-navy/10 pb-4">
                <span class="font-serif text-4xl text-navy/20 italic">03</span>
                <h3 class="text-xl font-bold text-navy uppercase tracking-wide">Master Agreement</h3>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden">
                <div class="bg-navy text-white p-4 text-xs font-bold uppercase tracking-widest flex justify-between">
                    <span>Terms of Engagement</span>
                    <span>READ TO BOTTOM</span>
                </div>
                
                <div id="terms-scroll" class="scroll-trap h-64 overflow-y-auto p-6 text-xs text-gray-600 space-y-4 leading-relaxed text-justify">
                    <p class="font-bold text-navy">AGREEMENT BETWEEN CLIENT AND LAURA CLARKE T/A DOCU-HUB OPERATIONS SERVICES.</p>
                    <p><strong>1. AUTHORITY TO ACT:</strong> By signing this digital instrument, you authorize Docu-Hub to act as your liaison with the selected Government Agency (PICA, TAJ, RGD, JCF).</p>
                    <p><strong>2. DUAL-CLOCK POLICY (DATA RETENTION):</strong> You acknowledge our strict data lifecycle policy. <strong>Standard ID documents</strong> (Birth Certs, Passports) are purged from our digital systems after <strong>30 days</strong>. <strong>Financial records</strong> (Tax receipts, Business filings) are retained in cold storage for <strong>7 years</strong> as required by Jamaican financial law.</p>
                    <p><strong>3. LIABILITY LIMITATION:</strong> Docu-Hub is a logistics facilitator. We are not responsible for delays caused by government system outages, strikes, or force majeure events.</p>
                    <p><strong>4. FEES & REFUNDS:</strong> The Professional Liaison Fee is non-refundable once the service has commenced. Government Agency Fees are passed directly to the institution.</p>
                    <p><strong>5. PRIVACY (JDPA 2020):</strong> Your data is processed solely for the purpose of this specific mandate. We do not sell or share data with third parties outside the necessary government scope.</p>
                    <p class="text-red-600 font-bold">*** END OF AGREEMENT ***</p>
                </div>

                <div class="p-6 bg-gray-50 border-t border-gray-200">
                    <label class="flex items-center gap-4 cursor-not-allowed opacity-50 transition-opacity duration-300" id="agree-label">
                        <input type="checkbox" id="check-agree" disabled class="w-5 h-5 accent-navy">
                        <span class="text-xs font-bold text-navy">I accept the Terms, Dual-Clock Policy, and Liaison Authority.</span>
                    </label>
                    <button id="btn-agree" disabled onclick="confirmAgreement()" class="mt-4 btn-primary btn-disabled w-full py-4 rounded font-bold uppercase text-xs tracking-widest transition-all">
                        Accept & Continue
                    </button>
                </div>
            </div>
        </section>

        <section id="leg-4" class="hidden opacity-50 transition-all duration-500">
            <div class="flex items-baseline gap-4 mb-6 border-b border-navy/10 pb-4">
                <span class="font-serif text-4xl text-navy/20 italic">04</span>
                <h3 class="text-xl font-bold text-navy uppercase tracking-wide">Forensic Intake</h3>
            </div>

            <form id="intake-form" onsubmit="return false;" class="space-y-6">
                <div id="dynamic-fields" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>

                <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                    <label class="block text-[10px] font-bold uppercase text-gray-400 mb-2">Digital Signature</label>
                    <canvas id="sig-canvas" width="600" height="150" class="w-full"></canvas>
                    <div class="flex justify-between mt-2">
                        <button onclick="clearSig()" class="text-[10px] text-red-500 font-bold uppercase hover:underline">Clear</button>
                        <span class="text-[10px] text-gray-400">Sign above using finger or mouse</span>
                    </div>
                </div>

                <button onclick="submitPayload()" class="btn-primary w-full py-5 rounded-lg font-bold uppercase text-sm tracking-widest shadow-xl">
                    Transmit Securely
                </button>
            </form>
        </section>

    </main>

    <div class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-navy/90 backdrop-blur text-white px-6 py-3 rounded-full shadow-2xl z-50 flex items-center gap-6 border border-white/10">
        <a href="#help" class="text-[10px] font-bold uppercase tracking-widest hover:text-gold transition-colors">Help Centre</a>
        <div class="h-4 w-px bg-white/20"></div>
        <a href="#" class="text-[10px] font-bold uppercase tracking-widest hover:text-gold transition-colors">Track Case</a>
    </div>

    <footer id="help" class="bg-white border-t border-gray-200 mt-24 py-12">
        <div class="max-w-4xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-8 text-xs text-gray-500">
            <div class="space-y-4">
                <h4 class="font-bold text-navy uppercase tracking-widest">Docu-Hub Ops</h4>
                <p>Laura Clarke T/A Docu-Hub.<br>Spanish Town, St. Catherine.</p>
                <p class="font-mono text-gold">DPA REG: PENDING</p>
            </div>
            <div class="space-y-2">
                <h4 class="font-bold text-navy uppercase tracking-widest">Compliance</h4>
                <a href="#" class="block hover:text-navy">Privacy Policy (JDPA)</a>
                <a href="#" class="block hover:text-navy">Dual-Clock Retention</a>
                <a href="#" class="block hover:text-navy">KYC Protocols</a>
            </div>
            <div class="space-y-2">
                <h4 class="font-bold text-navy uppercase tracking-widest">Contact</h4>
                <p>admin@dochubservices.com</p>
                <p>1 (876) 561-2614</p>
            </div>
        </div>
    </footer>

    <div id="status-overlay" class="fixed inset-0 z-[100] hidden flex items-center justify-center sensory-overlay bg-navy/40">
        <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-sm w-full mx-4 text-center transform transition-all scale-100">
            <div id="status-icon" class="mx-auto mb-4 w-12 h-12 flex items-center justify-center rounded-full bg-navy/10 text-navy">
                <i data-lucide="loader" class="animate-spin"></i>
            </div>
            <h3 id="status-title" class="font-serif text-2xl font-bold text-navy mb-2">Processing</h3>
            <p id="status-msg" class="text-sm text-gray-600 leading-relaxed mb-6">Securely handshaking with server...</p>
            <button id="status-btn" onclick="closeOverlay()" class="hidden w-full py-3 rounded border border-navy text-navy font-bold uppercase text-xs hover:bg-navy hover:text-white transition-colors">
                Close
            </button>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzX7CSHDzfPCH3SsEeUCrHTE9X7omiskVh8ogPGm5Wvva9Xw0cK_9vaQYKyls10m2Ni/exec";

        // --- SERVICE REGISTRY (SOP DATA) ---
        const SERVICES = [
            { id: 'pica', name: 'Passport Renewal', fee: '$6,500', liaison: '$3,500', icon: 'passport', fields: [
                { id: 'old_ppt', label: 'Last Passport Number', type: 'text' },
                { id: 'expiry', label: 'Expiration Date', type: 'date' }
            ]},
            { id: 'jcf', name: 'Police Record', fee: '$3,000', liaison: '$4,000', icon: 'fingerprint', fields: [
                { id: 'parish', label: 'Parish of Residence', type: 'text' },
                { id: 'reason', label: 'Reason for Record', type: 'text' }
            ]},
            { id: 'rgd', name: 'Vital Records', fee: '$2,500', liaison: '$3,500', icon: 'scroll', fields: [
                { id: 'mother_name', label: 'Mother\'s Maiden Name', type: 'text' },
                { id: 'event_parish', label: 'Event Parish', type: 'text' }
            ]},
            { id: 'taj', name: 'Tax / Vehicle', fee: '$Var', liaison: '$2,500', icon: 'car', fields: [
                { id: 'plate_num', label: 'License Plate / TRN', type: 'text' },
                { id: 'trans_type', label: 'Transaction Type', type: 'text' }
            ]},
            { id: 'corp', name: 'Corporate Bulk', fee: 'Custom', liaison: 'Quote', icon: 'building', fields: [
                { id: 'company_name', label: 'Registered Company Name', type: 'text' },
                { id: 'staff_count', label: 'Number of Staff', type: 'number' }
            ]},
            { id: 'consult', name: 'Consultation', fee: '$5,000', liaison: 'Included', icon: 'search', fields: [
                { id: 'case_summary', label: 'Brief Case Summary', type: 'text' },
                { id: 'book_date', label: 'Preferred Date', type: 'date' }
            ]}
        ];

        let state = { selected: null, sigData: null };

        // --- INIT ---
        window.onload = () => {
            lucide.createIcons();
            renderServices();
            initSigPad();
            initScrollTrap();
        };

        // --- RENDERERS ---
        function renderServices() {
            const grid = document.getElementById('service-grid');
            grid.innerHTML = SERVICES.map(s => `
                <div onclick="selectService('${s.id}')" id="card-${s.id}" class="card-interaction bg-white p-6 rounded-xl cursor-pointer group relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                        <i data-lucide="${s.icon}" size="64"></i>
                    </div>
                    <h4 class="font-serif font-bold text-lg text-navy mb-1">${s.name}</h4>
                    <div class="text-[10px] font-mono text-gray-500 space-y-1 mt-4">
                        <div class="flex justify-between border-b border-dashed pb-1"><span>AGENCY FEE</span> <span class="text-navy font-bold">${s.fee}</span></div>
                        <div class="flex justify-between pt-1"><span>LIAISON FEE</span> <span class="text-gold font-bold">${s.liaison}</span></div>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function selectService(id) {
            state.selected = SERVICES.find(s => s.id === id);
            
            // Visual Update
            document.querySelectorAll('.card-interaction').forEach(c => c.classList.remove('card-active'));
            document.getElementById(`card-${id}`).classList.add('card-active');

            // Render Audit Checklist
            const checklist = document.getElementById('checklist-container');
            checklist.innerHTML = `
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded border border-gray-200">
                    <input type="checkbox" class="audit-check accent-emerald">
                    <span class="text-xs font-bold text-navy">Govt Issued ID (Driver's Lic / Voter ID)</span>
                </label>
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded border border-gray-200">
                    <input type="checkbox" class="audit-check accent-emerald">
                    <span class="text-xs font-bold text-navy">TRN Card / Slip</span>
                </label>
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded border border-gray-200">
                    <input type="checkbox" class="audit-check accent-emerald">
                    <span class="text-xs font-bold text-navy">Passport Photos (2) - Verified by JP</span>
                </label>
            `;

            // Reveal Next Leg
            revealSection('leg-2');
        }

        function revealSection(id) {
            const el = document.getElementById(id);
            el.classList.remove('hidden');
            setTimeout(() => el.classList.remove('opacity-50'), 100);
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function confirmAudit() {
            const checks = document.querySelectorAll('.audit-check');
            const allChecked = Array.from(checks).every(c => c.checked);
            
            if(!allChecked) {
                showStatus('Attention', 'Please confirm you possess all required documents.', 'alert-triangle', 'text-gold');
                return;
            }
            revealSection('leg-3');
        }

        // --- SCROLL TRAP LOGIC ---
        function initScrollTrap() {
            const box = document.getElementById('terms-scroll');
            const check = document.getElementById('check-agree');
            const btn = document.getElementById('btn-agree');
            const label = document.getElementById('agree-label');

            box.addEventListener('scroll', () => {
                if (Math.abs(box.scrollHeight - box.clientHeight - box.scrollTop) < 5) {
                    check.disabled = false;
                    label.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            });

            check.addEventListener('change', () => {
                if(check.checked) {
                    btn.disabled = false;
                    btn.classList.remove('btn-disabled');
                } else {
                    btn.disabled = true;
                    btn.classList.add('btn-disabled');
                }
            });
        }

        function confirmAgreement() {
            renderIntakeForm();
            revealSection('leg-4');
        }

        // --- INTAKE FORM GENERATOR ---
        function renderIntakeForm() {
            const container = document.getElementById('dynamic-fields');
            // Standard Fields
            let html = `
                <div class="space-y-1">
                    <label class="text-[10px] font-bold uppercase text-gray-400">Full Legal Name</label>
                    <input type="text" id="client_name" class="w-full p-3 border-b-2 border-gray-200 bg-transparent focus:border-navy outline-none transition-colors font-serif text-lg">
                </div>
                <div class="space-y-1">
                    <label class="text-[10px] font-bold uppercase text-gray-400">Email Address</label>
                    <input type="email" id="client_email" class="w-full p-3 border-b-2 border-gray-200 bg-transparent focus:border-navy outline-none transition-colors font-sans">
                </div>
            `;
            
            // SOP Specific Fields
            state.selected.fields.forEach(f => {
                html += `
                    <div class="space-y-1">
                        <label class="text-[10px] font-bold uppercase text-gray-400">${f.label}</label>
                        <input type="${f.type}" id="${f.id}" class="w-full p-3 border-b-2 border-gray-200 bg-transparent focus:border-navy outline-none transition-colors font-sans">
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        // --- CANVAS SIGNATURE ---
        let canvas, ctx, drawing = false;
        function initSigPad() {
            canvas = document.getElementById('sig-canvas');
            ctx = canvas.getContext('2d');
            ctx.strokeStyle = "#003366";
            ctx.lineWidth = 2;

            // Events
            canvas.addEventListener('mousedown', startDraw);
            canvas.addEventListener('mouseup', stopDraw);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('touchstart', (e) => { e.preventDefault(); startDraw(e.touches[0]); });
            canvas.addEventListener('touchend', stopDraw);
            canvas.addEventListener('touchmove', (e) => { e.preventDefault(); draw(e.touches[0]); });
        }

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            return { x: e.clientX - rect.left, y: e.clientY - rect.top };
        }

        function startDraw(e) { drawing = true; const pos = getPos(e); ctx.beginPath(); ctx.moveTo(pos.x, pos.y); }
        function stopDraw() { drawing = false; }
        function draw(e) { if(!drawing) return; const pos = getPos(e); ctx.lineTo(pos.x, pos.y); ctx.stroke(); }
        function clearSig() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

        // --- TRANSMISSION ---
        function submitPayload() {
            const name = document.getElementById('client_name').value;
            if(!name) { showStatus('Missing Data', 'Please enter your name.', 'alert-circle', 'text-red-500'); return; }

            // Capture Signature
            state.sigData = canvas.toDataURL();
            
            // Build SOP Data Payload
            let sopData = {};
            state.selected.fields.forEach(f => {
                const val = document.getElementById(f.id).value;
                sopData[f.label] = val;
            });

            // Show Processing Overlay
            showStatus('Authenticating', 'Encrypting payload for transmission...', 'loader', 'text-navy', true);

            // Fetch
            const payload = {
                name: name,
                email: document.getElementById('client_email').value,
                service: state.selected.name,
                sopData: sopData,
                signature: state.sigData
            };

            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'text/plain' },
                body: JSON.stringify(payload)
            })
            .then(() => {
                setTimeout(() => {
                    showStatus('Success', 'Case initiated. Check your email for the liaison docket.', 'check-circle', 'text-emerald');
                    document.getElementById('status-btn').classList.remove('hidden');
                }, 2000);
            })
            .catch(err => {
                showStatus('Transmission Error', 'Secure handshake failed. Please retry.', 'wifi-off', 'text-red-500');
                document.getElementById('status-btn').classList.remove('hidden');
            });
        }

        // --- OVERLAY SYSTEM ---
        function showStatus(title, msg, icon, colorClass, spin = false) {
            const ol = document.getElementById('status-overlay');
            const ti = document.getElementById('status-title');
            const ms = document.getElementById('status-msg');
            const ic = document.getElementById('status-icon');
            
            ol.classList.remove('hidden');
            ti.innerText = title;
            ms.innerText = msg;
            
            ic.innerHTML = `<i data-lucide="${icon}" class="${colorClass} ${spin ? 'animate-spin' : ''}" size="32"></i>`;
            lucide.createIcons();
            
            if(!spin) document.getElementById('status-btn').classList.remove('hidden');
            else document.getElementById('status-btn').classList.add('hidden');
        }

        function closeOverlay() {
            document.getElementById('status-overlay').classList.add('hidden');
        }

    </script>
</body>
</html>
